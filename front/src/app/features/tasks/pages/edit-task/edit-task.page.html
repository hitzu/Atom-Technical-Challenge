<div class="edit-task-page container py-4">
  <div class="row justify-content-center">
    <div class="col-12">
      <h2 class="mb-3 text-center">Editar tarea</h2>

      <div
        *ngIf="isLoading()"
        class="alert alert-info mt-3"
        role="status"
        aria-live="polite"
      >
        Cargando tarea...
      </div>

      <div
        *ngIf="errorMessage() && !isLoading()"
        class="alert alert-danger mt-3"
        role="alert"
      >
        {{ errorMessage() }}
      </div>

      <div class="card w-100">
        <div class="card-body">
          <form [formGroup]="form" (ngSubmit)="onSubmit()">
            <div class="mb-3">
              <label class="form-label" for="title">Título</label>
              <input
                id="title"
                #titleInput
                class="form-control"
                type="text"
                placeholder="Ej: Comprar leche"
                formControlName="title"
                autocomplete="off"
                required
                [attr.aria-invalid]="isInvalid('title')"
                aria-describedby="title-help title-error"
              />
              <div id="title-help" class="form-text">Campo requerido.</div>
              <div
                *ngIf="isInvalid('title')"
                id="title-error"
                class="invalid-feedback d-block"
              >
                El título es requerido.
              </div>
            </div>

            <div class="mb-3">
              <label class="form-label" for="description">Descripción</label>
              <textarea
                id="description"
                class="form-control"
                rows="3"
                placeholder="Opcional: agrega detalles"
                formControlName="description"
              ></textarea>
            </div>

            <div class="mb-3 form-check">
              <input
                id="completed"
                class="form-check-input"
                type="checkbox"
                formControlName="completed"
              />
              <label class="form-check-label" for="completed">Completada</label>
            </div>

            <div class="d-flex flex-column flex-sm-row gap-2">
              <button
                class="btn btn-primary"
                type="submit"
                [disabled]="form.invalid || isSubmitting() || isLoading()"
              >
                {{ isSubmitting() ? 'Guardando...' : 'Guardar cambios' }}
              </button>
              <button
                class="btn btn-outline-secondary"
                type="button"
                (click)="goBack()"
                [disabled]="isSubmitting() || isLoading()"
              >
                Cancelar
              </button>
            </div>
          </form>
        </div>
      </div>
    </div>
  </div>
</div>
